
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Proto2FFI Performance Comparison Summary</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1400px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; }
        h1 { color: #333; border-bottom: 3px solid #4CAF50; padding-bottom: 10px; }
        h2 { color: #555; margin-top: 40px; border-bottom: 2px solid #ddd; padding-bottom: 8px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #4CAF50; color: white; }
        tr:hover { background-color: #f5f5f5; }
        .winner { color: #4CAF50; font-weight: bold; }
        .metric { display: inline-block; margin: 20px; padding: 20px; background: #f9f9f9; border-radius: 8px; min-width: 200px; }
        .metric-value { font-size: 32px; font-weight: bold; color: #4CAF50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Proto2FFI Performance Comparison Summary</h1>

        <h2>Baseline Performance (Proto2FFI)</h2>
        <table>
            <tr><th>Benchmark</th><th>Category</th><th>Ops/Sec</th><th>Latency (ns)</th><th>Throughput (MB/s)</th></tr>
            <tr><td>Post creation (large messages)</td><td>allocation</td><td>290002</td><td>3448.26</td><td>1544.35</td></tr><tr><td>Comment creation (medium messages)</td><td>allocation</td><td>1143018</td><td>874.88</td><td>2241.18</td></tr><tr><td>Reaction batch processing (small messages)</td><td>allocation</td><td>77622425</td><td>12.88</td><td>2961.06</td></tr><tr><td>NewsFeedItem SIMD scoring</td><td>simd</td><td>74220701</td><td>13.47</td><td>3963.81</td></tr><tr><td>Message batch operations</td><td>allocation</td><td>450876</td><td>2217.91</td><td>1737.15</td></tr><tr><td>Stack allocation - small struct</td><td>memory</td><td>1100019250</td><td>0.91</td><td>41962.40</td></tr><tr><td>Stack allocation - medium struct</td><td>memory</td><td>119260584</td><td>8.38</td><td>74610.66</td></tr><tr><td>Stack allocation - large struct</td><td>memory</td><td>15790098</td><td>63.33</td><td>84087.28</td></tr><tr><td>Heap allocation - small</td><td>memory</td><td>568093</td><td>1760.27</td><td>21.67</td></tr><tr><td>Heap allocation - large</td><td>memory</td><td>10718</td><td>93303.30</td><td>57.08</td></tr>
        </table>

        <h2>Comparison Benchmarks</h2>
        <table>
            <tr><th>Benchmark</th><th>Category</th><th>Ops/Sec</th><th>Latency (ns)</th></tr>
            <tr><td>Native Dart allocation</td><td>comparison_dart</td><td>15316966</td><td>65.29</td></tr><tr><td>Native Dart serialization</td><td>comparison_dart</td><td>7259528</td><td>137.75</td></tr><tr><td>Native Dart access</td><td>comparison_dart</td><td>976009682</td><td>1.02</td></tr><tr><td>JSON serialization</td><td>comparison_json</td><td>8502801</td><td>117.61</td></tr><tr><td>JSON deserialization</td><td>comparison_json</td><td>8434669</td><td>118.56</td></tr><tr><td>JSON roundtrip</td><td>comparison_json</td><td>4475609</td><td>223.43</td></tr><tr><td>Bincode serialization</td><td>comparison_bincode</td><td>22595464</td><td>44.26</td></tr><tr><td>Bincode deserialization</td><td>comparison_bincode</td><td>23169822</td><td>43.16</td></tr><tr><td>Bincode roundtrip</td><td>comparison_bincode</td><td>16793435</td><td>59.55</td></tr>
        </table>

        <h2>Latency Distribution (p50/p95/p99)</h2>
        <table>
            <tr><th>Benchmark</th><th>p50</th><th>p95</th><th>p99</th><th>p99.9</th><th>StdDev</th></tr>
            <tr><td>FFI call latency</td><td>0.00</td><td>42.00</td><td>42.00</td><td>84.00</td><td>1090.77</td></tr><tr><td>Small allocation latency</td><td>42.00</td><td>83.00</td><td>84.00</td><td>167.00</td><td>689.10</td></tr><tr><td>Medium allocation latency</td><td>42.00</td><td>83.00</td><td>84.00</td><td>125.00</td><td>384.74</td></tr><tr><td>Large allocation latency</td><td>166.00</td><td>167.00</td><td>209.00</td><td>54292.00</td><td>16576.57</td></tr>
        </table>

        <h2>Cache Efficiency</h2>
        <table>
            <tr><th>Benchmark</th><th>Ops/Sec</th><th>Latency (ns)</th><th>Bandwidth (MB/s)</th><th>Cache Util %</th></tr>
            <tr><td>Sequential access (L1 cache fit)</td><td>657570278</td><td>1.52</td><td>5016.86</td><td>100.00</td></tr><tr><td>Sequential access (L2 cache fit)</td><td>6601793090</td><td>0.15</td><td>50367.68</td><td>100.00</td></tr><tr><td>Sequential access (L3 cache fit)</td><td>699721233</td><td>1.43</td><td>5338.45</td><td>100.00</td></tr><tr><td>Random access (small dataset)</td><td>946745562</td><td>1.06</td><td>7223.10</td><td>12.50</td></tr><tr><td>Random access (medium dataset)</td><td>742705931</td><td>1.35</td><td>5666.40</td><td>12.50</td></tr><tr><td>Random access (large dataset)</td><td>142830192</td><td>7.00</td><td>1089.71</td><td>12.50</td></tr><tr><td>Strided access (stride=16)</td><td>337001709</td><td>2.97</td><td>2571.12</td><td>6.25</td></tr><tr><td>Cache thrashing (2 arrays)</td><td>6866497718</td><td>0.15</td><td>52387.22</td><td>50.00</td></tr>
        </table>

        <h2>Contention & Scalability</h2>
        <table>
            <tr><th>Benchmark</th><th>Threads</th><th>Ops/Sec</th><th>Latency (ns)</th><th>Overhead %</th></tr>
            <tr><td>Single-threaded baseline</td><td>1</td><td>682438736</td><td>1.47</td><td>0.00</td></tr><tr><td>Mutex contention (2 threads)</td><td>2</td><td>30455112</td><td>32.84</td><td>228.35</td></tr><tr><td>Mutex contention (4 threads)</td><td>4</td><td>27037837</td><td>36.99</td><td>269.85</td></tr><tr><td>Mutex contention (8 threads)</td><td>8</td><td>91289030</td><td>10.95</td><td>9.54</td></tr><tr><td>RwLock contention (2 threads)</td><td>2</td><td>62732797</td><td>15.94</td><td>59.41</td></tr><tr><td>RwLock contention (4 threads)</td><td>4</td><td>188798046</td><td>5.30</td><td>0.00</td></tr><tr><td>RwLock contention (8 threads)</td><td>8</td><td>148936491</td><td>6.71</td><td>0.00</td></tr><tr><td>Lock-free (4 threads)</td><td>4</td><td>257841325</td><td>3.88</td><td>0.00</td></tr><tr><td>Lock-free (8 threads)</td><td>8</td><td>145643331</td><td>6.87</td><td>0.00</td></tr>
        </table>
    </div>
</body>
</html>
