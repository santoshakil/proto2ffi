syntax = "proto3";

enum TransactionStatus {
    PENDING = 0;
    CONFIRMED = 1;
    FAILED = 2;
    DROPPED = 3;
}

enum ContractType {
    TRANSFER = 0;
    SMART_CONTRACT = 1;
    TOKEN_MINT = 2;
    TOKEN_BURN = 3;
    NFT_MINT = 4;
}

message Hash256 {
    bytes data = 1 [(proto2ffi.max_length) = 32];
}

message Address {
    bytes data = 1 [(proto2ffi.max_length) = 20];
}

message Signature {
    bytes r = 1 [(proto2ffi.max_length) = 32];
    bytes s = 2 [(proto2ffi.max_length) = 32];
    uint32 v = 3;
}

message Transaction {
    option (proto2ffi.pool_size) = 100000;

    bytes hash = 1 [(proto2ffi.max_length) = 32];
    bytes from_address = 2 [(proto2ffi.max_length) = 20];
    bytes to_address = 3 [(proto2ffi.max_length) = 20];
    uint64 value = 4;
    bytes data = 5 [(proto2ffi.max_length) = 4096];
    uint64 nonce = 6;
    uint64 gas_limit = 7;
    uint64 gas_price = 8;
    uint64 gas_used = 9;
    TransactionStatus status = 10;
    uint64 block_number = 11;
    uint32 transaction_index = 12;
    uint64 timestamp = 13;
}

message Block {
    option (proto2ffi.pool_size) = 10000;

    uint64 block_number = 1;
    bytes hash = 2 [(proto2ffi.max_length) = 32];
    bytes previous_hash = 3 [(proto2ffi.max_length) = 32];
    bytes state_root = 4 [(proto2ffi.max_length) = 32];
    bytes transactions_root = 5 [(proto2ffi.max_length) = 32];
    bytes receipts_root = 6 [(proto2ffi.max_length) = 32];
    bytes miner_address = 7 [(proto2ffi.max_length) = 20];
    uint64 difficulty = 8;
    uint64 total_difficulty = 9;
    uint64 size = 10;
    uint64 gas_limit = 11;
    uint64 gas_used = 12;
    uint64 timestamp = 13;
    uint64 nonce = 14;
    uint32 transaction_count = 15;
}

message TransactionReceipt {
    option (proto2ffi.pool_size) = 100000;

    bytes transaction_hash = 1 [(proto2ffi.max_length) = 32];
    uint64 block_number = 2;
    bytes block_hash = 3 [(proto2ffi.max_length) = 32];
    uint32 transaction_index = 4;
    bytes from_address = 5 [(proto2ffi.max_length) = 20];
    bytes to_address = 6 [(proto2ffi.max_length) = 20];
    uint64 gas_used = 7;
    uint64 cumulative_gas_used = 8;
    bytes contract_address = 9 [(proto2ffi.max_length) = 20];
    uint32 status = 10;
}

message SmartContract {
    option (proto2ffi.pool_size) = 50000;

    bytes address = 1 [(proto2ffi.max_length) = 20];
    bytes creator = 2 [(proto2ffi.max_length) = 20];
    bytes bytecode = 3 [(proto2ffi.max_length) = 24576];
    uint64 balance = 4;
    uint64 nonce = 5;
    uint64 created_at_block = 6;
    ContractType contract_type = 7;
}

message Account {
    option (proto2ffi.pool_size) = 500000;

    bytes address = 1 [(proto2ffi.max_length) = 20];
    uint64 balance = 2;
    uint64 nonce = 3;
    bytes code_hash = 4 [(proto2ffi.max_length) = 32];
    bytes storage_root = 5 [(proto2ffi.max_length) = 32];
}

message MerkleProof {
    bytes leaf = 1 [(proto2ffi.max_length) = 32];
    repeated bytes siblings = 2 [(proto2ffi.max_count) = 32];
    uint32 index = 3;
}

message StateTransition {
    option (proto2ffi.simd) = true;
    option (proto2ffi.pool_size) = 200000;

    bytes account_address = 1 [(proto2ffi.max_length) = 20];
    uint64 balance_before = 2;
    uint64 balance_after = 3;
    uint64 nonce_before = 4;
    uint64 nonce_after = 5;
    bytes storage_key = 6 [(proto2ffi.max_length) = 32];
    bytes storage_value_before = 7 [(proto2ffi.max_length) = 32];
    bytes storage_value_after = 8 [(proto2ffi.max_length) = 32];
}

message PendingTransactionPool {
    repeated Transaction transactions = 1 [(proto2ffi.max_count) = 10000];
    uint64 total_gas = 2;
    uint32 count = 3;
}

message BlockchainState {
    uint64 latest_block_number = 1;
    bytes latest_block_hash = 2 [(proto2ffi.max_length) = 32];
    uint64 total_difficulty = 3;
    uint64 chain_id = 4;
    uint64 pending_transactions = 5;
}

message ConsensusData {
    option (proto2ffi.simd) = true;

    uint64 slot_number = 1;
    uint64 epoch_number = 2;
    bytes proposer_address = 3 [(proto2ffi.max_length) = 20];
    repeated bytes validator_signatures = 4 [(proto2ffi.max_count) = 100];
    uint32 validator_count = 5;
    uint32 signature_count = 6;
    bool is_finalized = 7;
}

message TokenBalance {
    option (proto2ffi.pool_size) = 1000000;

    bytes owner_address = 1 [(proto2ffi.max_length) = 20];
    bytes token_address = 2 [(proto2ffi.max_length) = 20];
    uint64 balance = 3;
    uint64 last_updated_block = 4;
}

message NFT {
    option (proto2ffi.pool_size) = 100000;

    bytes contract_address = 1 [(proto2ffi.max_length) = 20];
    uint64 token_id = 2;
    bytes owner_address = 3 [(proto2ffi.max_length) = 20];
    string metadata_uri = 4 [(proto2ffi.max_length) = 256];
    uint64 minted_at_block = 5;
}

message GasEstimate {
    option (proto2ffi.simd) = true;

    uint64 base_fee = 1;
    uint64 priority_fee = 2;
    uint64 max_fee = 3;
    uint64 estimated_gas = 4;
    double confidence = 5;
}

message NetworkStats {
    option (proto2ffi.simd) = true;

    uint64 tps_current = 1;
    uint64 tps_average = 2;
    uint64 tps_peak = 3;
    uint64 block_time_ms = 4;
    uint64 pending_tx_count = 5;
    double network_utilization = 6;
    uint64 total_accounts = 7;
    uint64 total_contracts = 8;
}
