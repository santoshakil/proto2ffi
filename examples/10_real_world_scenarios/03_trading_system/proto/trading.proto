syntax = "proto3";

enum OrderSide {
    BUY = 0;
    SELL = 1;
}

enum OrderType {
    MARKET = 0;
    LIMIT = 1;
    STOP = 2;
    STOP_LIMIT = 3;
}

enum OrderStatus {
    PENDING = 0;
    OPEN = 1;
    PARTIALLY_FILLED = 2;
    FILLED = 3;
    CANCELLED = 4;
    REJECTED = 5;
}

message Price {
    option (proto2ffi.simd) = true;

    int64 value = 1;
    uint32 scale = 2;
}

message Order {
    option (proto2ffi.pool_size) = 10000;

    uint64 order_id = 1;
    uint64 timestamp_ns = 2;
    string symbol = 3 [(proto2ffi.max_length) = 16];
    OrderSide side = 4;
    OrderType order_type = 5;
    OrderStatus status = 6;
    Price price = 7;
    uint64 quantity = 8;
    uint64 filled_quantity = 9;
    uint64 remaining_quantity = 10;
}

message Trade {
    option (proto2ffi.pool_size) = 20000;

    uint64 trade_id = 1;
    uint64 timestamp_ns = 2;
    uint64 buy_order_id = 3;
    uint64 sell_order_id = 4;
    Price price = 5;
    uint64 quantity = 6;
}

message OrderBook {
    option (proto2ffi.pool_size) = 1000;

    string symbol = 1 [(proto2ffi.max_length) = 16];
    repeated Price bid_prices = 2 [(proto2ffi.max_count) = 100];
    repeated uint64 bid_quantities = 3 [(proto2ffi.max_count) = 100];
    uint32 bid_count = 4;
    repeated Price ask_prices = 5 [(proto2ffi.max_count) = 100];
    repeated uint64 ask_quantities = 6 [(proto2ffi.max_count) = 100];
    uint32 ask_count = 7;
    uint64 sequence_number = 8;
}

message MarketData {
    option (proto2ffi.pool_size) = 5000;
    option (proto2ffi.simd) = true;

    string symbol = 1 [(proto2ffi.max_length) = 16];
    uint64 timestamp_ns = 2;
    Price last_price = 3;
    Price bid_price = 4;
    Price ask_price = 5;
    uint64 volume = 6;
    Price open = 7;
    Price high = 8;
    Price low = 9;
}

message RiskLimits {
    option (proto2ffi.simd) = true;

    uint64 max_position_size = 1;
    uint64 max_order_value = 2;
    uint32 max_orders_per_second = 3;
    Price max_price_deviation = 4;
}

message Position {
    option (proto2ffi.pool_size) = 1000;

    string symbol = 1 [(proto2ffi.max_length) = 16];
    int64 quantity = 2;
    Price average_price = 3;
    Price unrealized_pnl = 4;
    Price realized_pnl = 5;
}

message TradingStats {
    option (proto2ffi.simd) = true;

    uint64 total_orders = 1;
    uint64 total_trades = 2;
    uint64 total_volume = 3;
    uint32 orders_per_second = 4;
    uint32 trades_per_second = 5;
    uint64 average_latency_ns = 6;
}
