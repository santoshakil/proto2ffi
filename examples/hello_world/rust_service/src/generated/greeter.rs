// Generated by proto2ffi
// DO NOT EDIT

use super::ByteBuffer;
use crate::{HelloRequest, HelloResponse};
use prost::Message;

/// Greeter service trait
///
/// Implement this trait to provide the service logic.
/// The generated FFI exports will call these methods.
pub trait Greeter {
    /// SayHello method
    fn say_hello(&self, request: HelloRequest)
        -> Result<HelloResponse, Box<dyn std::error::Error>>;
}

pub fn encode_message<M: Message>(msg: &M) -> Result<Vec<u8>, Box<dyn std::error::Error>> {
    let mut buf = Vec::new();
    msg.encode(&mut buf)?;
    Ok(buf)
}

pub fn decode_message<M: Message + Default>(bytes: &[u8]) -> Result<M, Box<dyn std::error::Error>> {
    Ok(M::decode(bytes)?)
}
